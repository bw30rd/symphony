var Activity={bet1A0001:function(e){var t={smallOrLarge:$("input[name=smallOrLarge]:checked").val(),amount:$("input[name=amount]:checked").val()};$.ajax({url:Label.servePath+"/activity/1A0001/bet",type:"POST",headers:{csrfToken:e},cache:!1,data:JSON.stringify(t),success:function(e,t){e.sc?($("#betDiv, #betBtn").remove(),$("#tip").addClass("succ").removeClass("error").html("<ul><li>"+e.msg+"</li></ul>")):$("#tip").addClass("error").removeClass("succ").html("<ul><li>"+e.msg+"</li></ul>"),$("#tip").show(),setTimeout(function(){$("#tip").hide()},3e3)}})},collect1A0001:function(){var e={};$.ajax({url:Label.servePath+"/activity/1A0001/collect",type:"POST",cache:!1,data:JSON.stringify(e),success:function(e,t){$("#tip").show(),e.sc?($("#tip").addClass("succ").removeClass("error").html("<ul><li>"+e.msg+"</li></ul>"),$("#collectBtn").remove()):($("#tip").addClass("error").removeClass("succ").html("<ul><li>"+e.msg+"</li></ul>"),setTimeout(function(){$("#tip").hide()},3e3))}})},charInit:function(e){var t=document.getElementById(e),n=t.getContext("2d");n.strokeStyle="#000",n.lineWidth=5,n.lineJoin=n.lineCap="round",n.shadowBlur=5,n.shadowColor="rgb(0, 0, 0)";var a=!1,o=0,s=0;t.onmousedown=function(e){a=!0,n.beginPath(),o=e.clientX-e.target.offsetLeft+$(window).scrollLeft(),s=e.clientY-e.target.offsetTop+$(window).scrollTop(),n.moveTo(o,s)},t.onmousemove=function(e){a&&(o=e.clientX-e.target.offsetLeft+$(window).scrollLeft(),s=e.clientY-e.target.offsetTop+$(window).scrollTop(),n.lineTo(o,s),n.stroke())},t.onmouseup=function(){a=!1},t.addEventListener("touchstart",function(e){n.beginPath(),o=e.changedTouches[0].pageX-e.target.offsetLeft,s=e.changedTouches[0].pageY-e.target.offsetTop,n.moveTo(o,s)},!1),t.addEventListener("touchmove",function(e){e.preventDefault(),o=e.changedTouches[0].pageX-e.target.offsetLeft,s=e.changedTouches[0].pageY-e.target.offsetTop,n.lineTo(o,s),n.stroke()},!1)},submitCharacter:function(e){var t=document.getElementById(e),n={dataURL:t.toDataURL(),character:$("h2.fn-inline a").text()};$.ajax({url:Label.servePath+"/activity/character/submit",type:"POST",cache:!1,data:JSON.stringify(n),beforeSend:function(){var e=$("button.blue");e.attr("disabled","disabled").css("opacity","0.3").text(e.text()+"ing")},success:function(e,t){alert(e.msg),e.sc&&window.location.reload()},complete:function(){var e=$("button.blue");e.removeAttr("disabled").css("opacity","1").text(e.text().substr(0,e.text().length-3))}})},clearCharacter:function(e){var t=document.getElementById(e),n=t.getContext("2d");n.clearRect(0,0,n.canvas.width,n.canvas.height)},initSnake:function(){EatingSnake.initMap("snakeCanvas")},startSnake:function(e){confirm(Label.activityStartEatingSnakeTipLabel)&&($(document).unbind("keyup"),EatingSnake.start(e),document.onkeydown=function(e){var e=e||window.event;EatingSnake.input(e.keyCode)})},checkin:function(e,t){var n=Label.servePath+"/activity/daily-checkin";$.ajax({url:n,type:"POST",headers:{csrfToken:e},cache:!1,success:function(e,n){0===e.sc&&("pc"==t?($("#signBtn").hide(),$("#plusCent").html("+"+(e.userPoint-e.usedPoint)).addClass("plusplus"),$("#uPoint,#uPoint2,#upCount").html(e.userPoint),$("#downCount").html(parseInt(e.userPoint)+parseInt(e.upgradePoints)),$("#uupgradePoints").html(e.upgradePoints),$("#uRank").html(e.userRank),$("#ucurrentUserLevel").html(e.currentUserLevel).removeClass().addClass(e.currentUserLevelType),$("#signLi").show().html('已连续签到 <span style="color:#FF9933">'+e.checkedinStreak+"</span> 天"),$(".progressIn_zq").width(100*(parseInt($("#upCount").html())/parseInt($("#downCount").html())).toFixed(2)+"%")):window.location.href=Label.servePath+"/member/"+e.userName)}})}};